{"id":1240301645,"question_id":1316,"lang":"java","lang_name":"Java","time":"1 month, 1 week","timestamp":1713916066,"status":10,"status_display":"Accepted","runtime":"6 ms","url":"/submissions/detail/1240301645/","is_pending":"Not Pending","title":"Fizz Buzz Multithreaded","memory":"42.5 MB","code":"import java.util.concurrent.Semaphore;\nimport java.util.function.IntConsumer;\n\nclass FizzBuzz {\n    private int n;\n    private Semaphore fizzSemaphore;\n    private Semaphore buzzSemaphore;\n    private Semaphore fizzBuzzSemaphore;\n    private Semaphore numberSemaphore;\n\n    public FizzBuzz(int n) {\n        this.n = n;\n        fizzSemaphore = new Semaphore(0);\n        buzzSemaphore = new Semaphore(0);\n        fizzBuzzSemaphore = new Semaphore(0);\n        numberSemaphore = new Semaphore(1); // Allow first number to print\n    }\n\n    public void fizz(Runnable printFizz) throws InterruptedException {\n        for (int i = 3; i <= n; i += 3) {\n            if (i % 5 != 0) {\n                fizzSemaphore.acquire();\n                printFizz.run();\n                numberSemaphore.release(); // Allow next number to print\n            }\n        }\n    }\n\n    public void buzz(Runnable printBuzz) throws InterruptedException {\n        for (int i = 5; i <= n; i += 5) {\n            if (i % 3 != 0) {\n                buzzSemaphore.acquire();\n                printBuzz.run();\n                numberSemaphore.release(); // Allow next number to print\n            }\n        }\n    }\n\n    public void fizzbuzz(Runnable printFizzBuzz) throws InterruptedException {\n        for (int i = 15; i <= n; i += 15) {\n            fizzBuzzSemaphore.acquire();\n            printFizzBuzz.run();\n            numberSemaphore.release(); // Allow next number to print\n        }\n    }\n\n    public void number(IntConsumer printNumber) throws InterruptedException {\n        for (int i = 1; i <= n; i++) {\n            numberSemaphore.acquire();\n            if (i % 3 == 0 && i % 5 == 0) {\n                fizzBuzzSemaphore.release();\n            } else if (i % 3 == 0) {\n                fizzSemaphore.release();\n            } else if (i % 5 == 0) {\n                buzzSemaphore.release();\n            } else {\n                printNumber.accept(i);\n                numberSemaphore.release(); // Allow next number to print\n            }\n        }\n    }\n}\n","compare_result":"111111111","title_slug":"fizz-buzz-multithreaded","has_notes":false,"flag_type":1}